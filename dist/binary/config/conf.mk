# -------------------------------------------------------------------

# This is the makefile-included file that contains the specifications
# of all the binary images that have to be created for a given
# distribution

# here is a template for all the entries of this file

# DISTRIBUTION_NAME = LIBCONFi ...
# DISTRIBUTION_NAME_varname = value
# LIBCONFi = __EEOPT_OPTj__ ...

# where varname is the name of a value that should be specified in the
# eecfg.h file as "EE_value". Valid "varname"s are listed in the
# ALL_SYMBOLS environment variable.

#
# The makefile defines MUST NOT contain the DEBUG symbol!!!!!
#


# -------------------------------------------------------------------

# the ALLDISTRIBUTIONS variable is used in the "help" rule


ALL_SYMBOLS += MAX_TASK MAX_APPMODE MAX_RESOURCE MAX_ALARM
ALL_SYMBOLS_MULTICORE += $(ALL_SYMBOLS) MAX_CPU CURRENTCPU MAX_RN ALTERA_MUTEX_BASE

# -------------------------------------------------------------------

# Here there are some examples

ALL_DISTRIBUTIONS += MODISTARC_TASK_1

MODISTARC_TASK_1 = MODISTARC_TASK_1_PROVA1 MODISTARC_TASK_1_PROVA2

MODISTARC_TASK_1_PROVA1_MAX_TASK = 4
MODISTARC_TASK_1_PROVA1_MAX_APPMODE = 1
MODISTARC_TASK_1_PROVA1_MAX_RESOURCE = 2
MODISTARC_TASK_1_PROVA1_MAX_ALARM = 0

MODISTARC_TASK_1_PROVA1 = __BIN_DISTR_LIMITED__ __ASSERT__ __TIMER_0_USED__ __EVALUATOR7T__ __OO_BCC1__ __ALLOW_NESTED_IRQ__ __OO_EXTENDED_STATUS__ __MONO__ __OO_NO_ALARMS__ __ARM7GNU__ __SAMSUNG_KS32C50100__



MODISTARC_TASK_1_PROVA2 = __BIN_DISTR_FULL__ __ASSERT__ __TIMER_0_USED__ __EVALUATOR7T__ __OO_BCC1__ __ALLOW_NESTED_IRQ__ __OO_EXTENDED_STATUS__ __MONO__ __OO_NO_ALARMS__ __OO_AUTOSTART_TASK__ __OO_ORTI_LASTERROR__ __OO_ORTI_SERVICETRACE__ __OO_ORTI_PRIORITY__ __OO_ORTI_RES_ISLOCKED__ __OO_ORTI_RES_LOCKER_TASK__ __OO_ORTI_STACK__ __OO_ORTI_ALARMTIME__ __ARM7GNU__ __SAMSUNG_KS32C50100__

# -------------------------------------------------------------------

ALL_DISTRIBUTIONS += MODISTARC_TASK_1_JANUS

MODISTARC_TASK_1_JANUS = MODISTARC_TASK_1_JANUS_PROVA1 MODISTARC_TASK_1_JANUS_PROVA2 MODISTARC_TASK_1_JANUS_PROVA3

MODISTARC_TASK_1_JANUS_PROVA1_MAX_TASK = 2
MODISTARC_TASK_1_JANUS_PROVA1_MAX_APPMODE = 1
MODISTARC_TASK_1_JANUS_PROVA1_MAX_RESOURCE = 1
MODISTARC_TASK_1_JANUS_PROVA1_MAX_ALARM = 0

MODISTARC_TASK_1_JANUS_PROVA1 = __BIN_DISTR_LIMITED__ __ASSERT__ __JANUS__ __OO_BCC1__ __ALLOW_NESTED_IRQ__ __OO_EXTENDED_STATUS__ __MONO__ __OO_NO_ALARMS__ __OO_AUTOSTART_TASK__ __ARM7GNU__ __JANUS_EIC_DOUBLE_BRANCH__

MODISTARC_TASK_1_JANUS_PROVA2 = __BIN_DISTR_FULL__ __ASSERT__ __JANUS__ __OO_BCC1__ __ALLOW_NESTED_IRQ__ __OO_EXTENDED_STATUS__ __MONO__ __OO_NO_ALARMS__ __OO_AUTOSTART_TASK__ __ARM7GNU__ __JANUS_EIC_DOUBLE_BRANCH__

MODISTARC_TASK_1_JANUS_PROVA3 = __BIN_DISTR_FULL__ __ASSERT__ __JANUS__ __OO_BCC1__ __ALLOW_NESTED_IRQ__ __OO_EXTENDED_STATUS__ __MONO__ __OO_NO_ALARMS__ __OO_AUTOSTART_TASK__ __ARM7GNU__ __JANUS_EIC_DOUBLE_BRANCH__ __JANUS_MULTICPU__

# -------------------------------------------------------------------

# this is the specification for the binary interface for the RTOS course

#ALL_DISTRIBUTIONS += RTOSCOURSE

#RTOSCOURSE = RTOSCOURSE_DIST0

#RTOSCOURSE_DIST0 =  __BIN_DISTR_FULL__  __TIMER_0_USED__ __EVALUATOR7T__ __ARM7GNU__ __SAMSUNG_KS32C50100__ __OO_ECC2__ __ALLOW_NESTED_IRQ__ __OO_EXTENDED_STATUS__ __OO_HAS_USERESSCHEDULER__ __MULTI__ __OO_NO_ALARMS__ __OO_AUTOSTART_TASK__

# for the moment the name must be RTDRUID, see bug 297
ifndef RTDRUID
ALL_DISTRIBUTIONS += RTDRUID

RTDRUID = RTDRUID_DIST0 RTDRUID_DIST1

# I removed __EE_OO_NO_ALARMS__ because now rtdruid always generates 0-length
# alarms arrays
RTDRUID_DIST0 =  __BIN_DISTR_FULL__  __TIMER_0_USED__ __TIMER_1_USED__ __BUTTON_USED__ __LEDS_USED__ __LCD_USED__ __DIP_SWITCH_USED__ __EVALUATOR7T__ __ARM7GNU__ __SAMSUNG_KS32C50100__ __OO_ECC2__ __ALLOW_NESTED_IRQ__ __OO_EXTENDED_STATUS__ __OO_HAS_USERESSCHEDULER__ __MULTI__ __OO_AUTOSTART_TASK__

RTDRUID_DIST1 =  __BIN_DISTR_FULL__ __TIMER_0_USED__ __TIMER_1_USED__ __BUTTON_USED__ __LEDS_USED__ __LCD_USED__ __DIP_SWITCH_USED__ __EVALUATOR7T__ __ARM7GNU__ __SAMSUNG_KS32C50100__ __OO_ECC2__ __ALLOW_NESTED_IRQ__ __OO_EXTENDED_STATUS__ __OO_HAS_USERESSCHEDULER__ __MULTI__ __OO_AUTOSTART_TASK__ __OO_AUTOSTART_ALARM__ __OO_HAS_ERRORHOOK__ __IRQ_STACK_NEEDED__

RTDRUID_DIST1 += __OO_ORTI_LASTERROR__ __OO_ORTI_SERVICETRACE__ __OO_ORTI_RUNNINGISR2__ __OO_ORTI_PRIORITY__ __OO_ORTI_STACK__ __OO_ORTI_RES_ISLOCKED__ __OO_ORTI_RES_LOCKER_TASK__ __OO_ORTI_ALARMTIME__

endif

# --------------------------------------------------------------------------------------

# NIOS2 binary distributions

ALL_DISTRIBUTIONS += NIOS2_LIMITED NIOS2_LIMITED_ALTERA











# Nios II Limited
# -----------------------------------------------------------------

# the idea is that this distribution must include two libraries for a 
# 2-CPU system

# Note: since Limited versions does not support Alarms, all the alarms
# part is not compiled at all. The __OO_NO_ALARMS__ MUST be specified
# when compiling limited distributions that will be used with a
# Limited RT-Druid. The optioon MUST NOT be specified when compiling
# with a Full RT-Druid distribution.


NIOS2_LIMITED = \
  NIOS2_LIMITED_SINGLE_2 \
  NIOS2_LIMITED_CPU0_0 \
  NIOS2_LIMITED_CPU0_1 \
  NIOS2_LIMITED_CPU0_2 \
  NIOS2_LIMITED_CPU0_3 \
  NIOS2_LIMITED_CPU1_0 \
  NIOS2_LIMITED_CPU1_1 \
  NIOS2_LIMITED_CPU1_2 \
  NIOS2_LIMITED_CPU1_3


# SINGLE CPU
# ----------------------------------------------------------

# 2 TASK

NIOS2_LIMITED_SINGLE_2_MAX_CPU = 1
NIOS2_LIMITED_SINGLE_2_CURRENTCPU = 0
NIOS2_LIMITED_SINGLE_2_MAX_RN = 0
NIOS2_LIMITED_SINGLE_2_MAX_TASK = 2
NIOS2_LIMITED_SINGLE_2_MAX_APPMODE = 1
#NIOS2_LIMITED_SINGLE_2_MAX_RESOURCE = 1
NIOS2_LIMITED_SINGLE_2_MAX_ALARM = 0

NIOS2_LIMITED_SINGLE_2 = __BIN_DISTR_LIMITED__ __NIOS2__ __OO_BCC1__ __ALLOW_NESTED_IRQ__ __MONO__ __OO_AUTOSTART_TASK__ __OO_EXTENDED_STATUS__ __OO_NO_ALARMS__



# CPU0
# ----------------------------------------------------------

# 0 TASK

NIOS2_LIMITED_CPU0_0_MAX_CPU = 2
NIOS2_LIMITED_CPU0_0_CURRENTCPU = 0
NIOS2_LIMITED_CPU0_0_MAX_RN = 3
NIOS2_LIMITED_CPU0_0_MAX_TASK = 0
NIOS2_LIMITED_CPU0_0_MAX_APPMODE = 1
#NIOS2_LIMITED_CPU0_0_MAX_RESOURCE = 1
NIOS2_LIMITED_CPU0_0_MAX_ALARM = 0

NIOS2_LIMITED_CPU0_0 = __BIN_DISTR_LIMITED__ __NIOS2__ __OO_BCC1__ __ALLOW_NESTED_IRQ__ __MONO__ __RN__ __MSRP__ __NIOS2_MULTICPU__ __NIOS2_SPIN_AVALON_MUTEX_DIRECT__ __RN_TASK__ __OO_AUTOSTART_TASK__ __OO_EXTENDED_STATUS__ __OO_NO_ALARMS__ __NIOS2_IPIC_PIO__

# ---

# 1 TASK

NIOS2_LIMITED_CPU0_1_MAX_CPU = 2
NIOS2_LIMITED_CPU0_1_CURRENTCPU = 0
NIOS2_LIMITED_CPU0_1_MAX_RN = 3
NIOS2_LIMITED_CPU0_1_MAX_TASK = 1
NIOS2_LIMITED_CPU0_1_MAX_APPMODE = 1
#NIOS2_LIMITED_CPU0_1_MAX_RESOURCE = 1
NIOS2_LIMITED_CPU0_1_MAX_ALARM = 0

NIOS2_LIMITED_CPU0_1 = __BIN_DISTR_LIMITED__ __NIOS2__ __OO_BCC1__ __ALLOW_NESTED_IRQ__ __MONO__ __RN__ __MSRP__ __NIOS2_MULTICPU__ __NIOS2_SPIN_AVALON_MUTEX_DIRECT__ __RN_TASK__ __OO_AUTOSTART_TASK__ __OO_EXTENDED_STATUS__ __OO_NO_ALARMS__ __NIOS2_IPIC_PIO__

# ---

# 2 TASK

NIOS2_LIMITED_CPU0_2_MAX_CPU = 2
NIOS2_LIMITED_CPU0_2_CURRENTCPU = 0
NIOS2_LIMITED_CPU0_2_MAX_RN = 3
NIOS2_LIMITED_CPU0_2_MAX_TASK = 2
NIOS2_LIMITED_CPU0_2_MAX_APPMODE = 1
#NIOS2_LIMITED_CPU0_2_MAX_RESOURCE = 1
NIOS2_LIMITED_CPU0_2_MAX_ALARM = 0

NIOS2_LIMITED_CPU0_2 = __BIN_DISTR_LIMITED__ __NIOS2__ __OO_BCC1__ __ALLOW_NESTED_IRQ__ __MONO__ __RN__ __MSRP__ __NIOS2_MULTICPU__ __NIOS2_SPIN_AVALON_MUTEX_DIRECT__ __RN_TASK__ __OO_AUTOSTART_TASK__ __OO_EXTENDED_STATUS__ __OO_NO_ALARMS__ __NIOS2_IPIC_PIO__

# ---

# 3 TASK

NIOS2_LIMITED_CPU0_3_MAX_CPU = 2
NIOS2_LIMITED_CPU0_3_CURRENTCPU = 0
NIOS2_LIMITED_CPU0_3_MAX_RN = 3
NIOS2_LIMITED_CPU0_3_MAX_TASK = 3
NIOS2_LIMITED_CPU0_3_MAX_APPMODE = 1
#NIOS2_LIMITED_CPU0_3_MAX_RESOURCE = 1
NIOS2_LIMITED_CPU0_3_MAX_ALARM = 0

NIOS2_LIMITED_CPU0_3 = __BIN_DISTR_LIMITED__ __NIOS2__ __OO_BCC1__ __ALLOW_NESTED_IRQ__ __MONO__ __RN__ __MSRP__ __NIOS2_MULTICPU__ __NIOS2_SPIN_AVALON_MUTEX_DIRECT__ __RN_TASK__ __OO_AUTOSTART_TASK__ __OO_EXTENDED_STATUS__ __OO_NO_ALARMS__ __NIOS2_IPIC_PIO__


# CPU1
# ----------------------------------------------------------

# 0 task

NIOS2_LIMITED_CPU1_0_MAX_CPU = 2
NIOS2_LIMITED_CPU1_0_CURRENTCPU = 1
NIOS2_LIMITED_CPU1_0_MAX_RN = 3
NIOS2_LIMITED_CPU1_0_MAX_TASK = 0
NIOS2_LIMITED_CPU1_0_MAX_APPMODE = 1
#NIOS2_LIMITED_CPU1_0_MAX_RESOURCE = 1
NIOS2_LIMITED_CPU1_0_MAX_ALARM = 0

NIOS2_LIMITED_CPU1_0 = __BIN_DISTR_LIMITED__ __NIOS2__ __OO_BCC1__ __ALLOW_NESTED_IRQ__ __MONO__ __RN__ __MSRP__ __NIOS2_MULTICPU__ __NIOS2_SPIN_AVALON_MUTEX_DIRECT__ __RN_TASK__ __OO_AUTOSTART_TASK__ __OO_EXTENDED_STATUS__ __OO_NO_ALARMS__ __NIOS2_IPIC_PIO__

# ---

# 1 task

NIOS2_LIMITED_CPU1_1_MAX_CPU = 2
NIOS2_LIMITED_CPU1_1_CURRENTCPU = 1
NIOS2_LIMITED_CPU1_1_MAX_RN = 3
NIOS2_LIMITED_CPU1_1_MAX_TASK = 1
NIOS2_LIMITED_CPU1_1_MAX_APPMODE = 1
#NIOS2_LIMITED_CPU1_1_MAX_RESOURCE = 1
NIOS2_LIMITED_CPU1_1_MAX_ALARM = 0

NIOS2_LIMITED_CPU1_1 = __BIN_DISTR_LIMITED__ __NIOS2__ __OO_BCC1__ __ALLOW_NESTED_IRQ__ __MONO__ __RN__ __MSRP__ __NIOS2_MULTICPU__ __NIOS2_SPIN_AVALON_MUTEX_DIRECT__ __RN_TASK__ __OO_AUTOSTART_TASK__ __OO_EXTENDED_STATUS__ __OO_NO_ALARMS__ __NIOS2_IPIC_PIO__

# ---

# 2 task

NIOS2_LIMITED_CPU1_2_MAX_CPU = 2
NIOS2_LIMITED_CPU1_2_CURRENTCPU = 1
NIOS2_LIMITED_CPU1_2_MAX_RN = 3
NIOS2_LIMITED_CPU1_2_MAX_TASK = 2
NIOS2_LIMITED_CPU1_2_MAX_APPMODE = 1
#NIOS2_LIMITED_CPU1_2_MAX_RESOURCE = 1
NIOS2_LIMITED_CPU1_2_MAX_ALARM = 0

NIOS2_LIMITED_CPU1_2 = __BIN_DISTR_LIMITED__ __NIOS2__ __OO_BCC1__ __ALLOW_NESTED_IRQ__ __MONO__ __RN__ __MSRP__ __NIOS2_MULTICPU__ __NIOS2_SPIN_AVALON_MUTEX_DIRECT__ __RN_TASK__ __OO_AUTOSTART_TASK__ __OO_EXTENDED_STATUS__ __OO_NO_ALARMS__ __NIOS2_IPIC_PIO__

# ---

# 3 task

NIOS2_LIMITED_CPU1_3_MAX_CPU = 2
NIOS2_LIMITED_CPU1_3_CURRENTCPU = 1
NIOS2_LIMITED_CPU1_3_MAX_RN = 3
NIOS2_LIMITED_CPU1_3_MAX_TASK = 3
NIOS2_LIMITED_CPU1_3_MAX_APPMODE = 1
#NIOS2_LIMITED_CPU1_3_MAX_RESOURCE = 1
NIOS2_LIMITED_CPU1_3_MAX_ALARM = 0

NIOS2_LIMITED_CPU1_3 = __BIN_DISTR_LIMITED__ __NIOS2__ __OO_BCC1__ __ALLOW_NESTED_IRQ__ __MONO__ __RN__ __MSRP__ __NIOS2_MULTICPU__ __NIOS2_SPIN_AVALON_MUTEX_DIRECT__ __RN_TASK__ __OO_AUTOSTART_TASK__ __OO_EXTENDED_STATUS__ __OO_NO_ALARMS__ __NIOS2_IPIC_PIO__

# ---

NIOS2_LIMITED_SINGLE_2_DESCRIPTION  = "ERIKA Enterprise Limited version, single CPU"

NIOS2_LIMITED_CPU0_0_DESCRIPTION  = "ERIKA Enterprise Limited version, CPU0"
NIOS2_LIMITED_CPU0_1_DESCRIPTION  = "ERIKA Enterprise Limited version, CPU0"
NIOS2_LIMITED_CPU0_2_DESCRIPTION  = "ERIKA Enterprise Limited version, CPU0"
NIOS2_LIMITED_CPU0_3_DESCRIPTION  = "ERIKA Enterprise Limited version, CPU0"
NIOS2_LIMITED_CPU1_0_DESCRIPTION  = "ERIKA Enterprise Limited version, CPU1"
NIOS2_LIMITED_CPU1_1_DESCRIPTION  = "ERIKA Enterprise Limited version, CPU1"
NIOS2_LIMITED_CPU1_2_DESCRIPTION  = "ERIKA Enterprise Limited version, CPU1"
NIOS2_LIMITED_CPU1_3_DESCRIPTION  = "ERIKA Enterprise Limited version, CPU1"



# Nios II Limited for Altera
# -----------------------------------------------------------------

# This limited version includes the content of the normal limited
# version, plus a BCC1 library that is not limited to number of tasks
# and CPUs


NIOS2_LIMITED_ALTERA = \
  NIOS2_LIMITED_ALTERA_CPU_1 \
  NIOS2_LIMITED_ALTERA_CPU_N

#  NIOS2_LIMITED_ALTERA_CPU_1_ECC2 \

#NIOS2_LIMITED_ALTERA_CPU_N_MAX_APPMODE = 1
#NIOS2_LIMITED_ALTERA_CPU_N_MAX_ALARM = 0

NIOS2_LIMITED_ALTERA_CPU_N = __BIN_DISTR_FULL__ __NIOS2__ __OO_BCC1__ __ALLOW_NESTED_IRQ__ __MONO__ __RN__ __MSRP__ __NIOS2_MULTICPU__ __NIOS2_SPIN_AVALON_MUTEX_DIRECT__ __RN_TASK__ __OO_AUTOSTART_TASK__ __OO_EXTENDED_STATUS__ __OO_NO_ALARMS__ __NIOS2_IPIC_PIO__

NIOS2_LIMITED_ALTERA_CPU_N_DESCRIPTION  = "ERIKA Enterprise Limited version, N CPU, for Altera Internal use only"




#NIOS2_LIMITED_ALTERA_CPU_1_MAX_APPMODE = 1
#NIOS2_LIMITED_ALTERA_CPU_1_MAX_ALARM = 0

NIOS2_LIMITED_ALTERA_CPU_1 = __BIN_DISTR_FULL__ __NIOS2__ __OO_BCC1__ __ALLOW_NESTED_IRQ__ __MONO__ __OO_AUTOSTART_TASK__ __OO_EXTENDED_STATUS__ __OO_NO_ALARMS__

NIOS2_LIMITED_ALTERA_CPU_1_DESCRIPTION  = "ERIKA Enterprise Limited version, 1 CPU, for Altera Internal use only"




#NIOS2_LIMITED_ALTERA_CPU_1_ECC2 = __ALLOW_NESTED_IRQ__ __BIN_DISTR_FULL__ __MONO__ __NIOS2__ __OO_AUTOSTART_ALARM__ __OO_AUTOSTART_TASK__ __OO_ECC2__ __OO_EXTENDED_STATUS__ __OO_HAS_ERRORHOOK__ __OO_HAS_STARTUPHOOK__ __OO_HAS_USERESSCHEDULER__ __OO_ORTI_ALARMTIME__ __OO_ORTI_LASTERROR__ __OO_ORTI_PRIORITY__ __OO_ORTI_RES_ISLOCKED__ __OO_ORTI_RES_LOCKER_TASK__ __OO_ORTI_SERVICETRACE__ __OO_ORTI_STACK__

#NIOS2_LIMITED_ALTERA_CPU_1_ECC2_DESCRIPTION  = "ERIKA Enterprise Limited version, 1 CPU, ECC2, for Altera Internal use only"





# PIC30
# -----------------------------------------------------------------

ALL_DISTRIBUTIONS += PIC30_LIMITED


PIC30_LIMITED = \
  PIC30_LIMITED_BCC1

# 2 TASK

PIC30_LIMITED_BCC1_MAX_CPU = 1
PIC30_LIMITED_BCC1_CURRENTCPU = 0
PIC30_LIMITED_BCC1_MAX_RN = 0
PIC30_LIMITED_BCC1_MAX_TASK = 2
PIC30_LIMITED_BCC1_MAX_APPMODE = 1
#PIC30_LIMITED_BCC1_MAX_RESOURCE = 1
PIC30_LIMITED_BCC1_MAX_ALARM = 0

PIC30_LIMITED_BCC1 = __BIN_DISTR_LIMITED__ __PIC30__ __OO_BCC1__ __ALLOW_NESTED_IRQ__ __MONO__ __OO_AUTOSTART_TASK__ __OO_EXTENDED_STATUS__ __OO_NO_ALARMS__ __PIC30_ICD2__ __PIC30_SPLIM__

# AVR5
# -----------------------------------------------------------------

ALL_DISTRIBUTIONS += AVR5_LIMITED 

AVR5_LIMITED = \
  AVR5_LIMITED_BCC1

# 2 TASK

AVR5_LIMITED_BCC1_MAX_CPU = 1
AVR5_LIMITED_BCC1_CURRENTCPU = 0
AVR5_LIMITED_BCC1_MAX_RN = 0
AVR5_LIMITED_BCC1_MAX_TASK = 2
AVR5_LIMITED_BCC1_MAX_APPMODE = 1
AVR5_LIMITED_BCC1_MAX_ALARM = 0

AVR5_LIMITED_BCC1 = __BIN_DISTR_LIMITED__ __OO_BCC1__ __AVR5__   __ALLOW_NESTED_IRQ__ __MONO__ __OO_AUTOSTART_TASK__ __OO_EXTENDED_STATUS__ __OO_NO_ALARMS__ __AVR5_ICD2__ __AVR5_SPLIM__
##__OO_BCC1__

